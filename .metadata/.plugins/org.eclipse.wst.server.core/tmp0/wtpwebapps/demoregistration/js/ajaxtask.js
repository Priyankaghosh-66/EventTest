function fetchAndDecorateNotificationDetails(){if(isLoggedIn&&"undefined"!=isLoggedIn&&1==isLoggedIn){var a={};a.theTASK="FETCH_ALL_NOTIFICATION_COUNT",$.ajax({url:"LoadAllNotification",headers:{"content-type":"application/json"},data:JSON.stringify(a),error:function(){},success:function(a){console.log("All notification details"),console.log(a),parseInt(""+a)>0?($("#ntfcn_count").html(""+a),$("#ntfcn_count").show()):($("#ntfcn_count").hide(),$("#ntfcn_count").remove())},type:"POST"})}else console.log("No notification details")}function decorateNotificationDetails(){if($("#ntfcn_count").remove(),$("#all_notification").empty(),isLoggedIn&&"undefined"!=isLoggedIn&&1==isLoggedIn){var a={};a.theTASK="FETCH_ALL_NOTIFICATION_DETAILS",$.ajax({url:"LoadAllNotificationDetails",headers:{"content-type":"application/json"},data:JSON.stringify(a),error:function(){},success:function(a){console.log("All notification details 2"),console.log(a);for(var b=" <h3>Notifications</h3>",c=0;c<a.length;c++){var d="/ET/images/pst-user.png",e="   <p>File Name:<span>"+a[c][4]+"</span></p>";null!=a[c][2]&&(d="../../"+a[c][2]);var f="getNotificationFileDetails('"+a[c][3]+"')";1==a[c][14]&&(f="getNotificationFileDetailsForTimeLockedContentQAndAnswer('"+d+"','"+a[c][1]+"',"+a[c][8]+","+a[c][0]+",'"+a[c][4]+"',"+a[c][13]+",'"+a[c][3]+"')",e="   <p><span>Time Locked Content Question Answer</span></p>"),b=b+'    <li  onclick="'+f+'">     <div class="col-md-3 col-sm-3 no-padding no-margin" ><div class="folder-holder no-padding"><img src="'+d+'"  class="user picture  no-padding"/></div></div>      <div class="col-md-9 col-sm-9 ">  <p>Sender Name:<span>'+a[c][1]+"</span></p>"+e+"  </div>  </li>"}$("#all_notification").append(b)},type:"POST"})}else console.log("No notification details")}function getNotificationFileDetailsForTimeLockedContentQAndAnswer(a,b,c,d,e,f,g){var a="/ET/images/pst-user.png";null!=a&&(a="../../"+a);var h=' <img src="/ET/images/pdf.png" width = "500px" height = "500px" class="docExcel"/> ',i=c;if(null!=c){var j=new Date(c);i=j.getMonth()+1+"/"+j.getDate()+"/"+j.getFullYear()}var k='<i class="fa fa-globe" aria-hidden="true" style="color: #115884 !important"></i>';3==f&&(k='<i class="fa fa-user" aria-hidden="true" style="color: #115884 !important"></i>');var l="<a href='#' onclick='generateAndSavePdfForTimeLockedContentQuesAns(\""+g+"\");return false;'> <span><i class='fa fa-download' aria-hidden='true'></i></span><p>Download</p></a>";$("#notificationImageArea").html(h),$("#notificationDetailAreaSharedBy").html("<b>Share by :</b> "+b),$("#notificationDetailAreaFileName").html("<b>Time Locked Content Question and Answer</b> "),$("#notificationDetailAreaSharedOn").html("<b>Share Date :</b> "+i),$("#notificationDetailAreaUserPix").html('<img src="'+a+'" alt="'+b+'" />'),$("#notificationDetailAreaShareType").html(k),$("#notificationDetailAreaDescription").html(l),$("#myModalNotificationButton").click()}function getNotificationFileDetails(a){$.ajax({url:"getNotificationFileDetails?${_csrf.parameterName}=${_csrf.token}&fileID="+a,type:"POST",cache:!1,dataType:"json",success:function(a){$.each(a,function(a,b){var c="";c=b.share_by_user_Name;var d="/ET/images/pst-user.png";null!=b.userProfileImage&&(d="../../"+b.userProfileImage);var e=b.filePath,f=e.length,g=e.substr(6,f);g=g.replace(/\\/g,"/");var h=b.filePath.replace(/\\/g,"/").split("/"),j=(h[h.length-1],g.split(".")),k=j[j.length-1],l="download",m=' <iframe src="'+b.filePath.replace(/\\/g,"/")+'" width = "500px" height = "500px"></iframe> ';"doc"==k&&(m=' <img src="/ET/images/doc.jpg" width = "500px" height = "500px" class="docExcel"/> '),"docx"==k&&(m=' <img src="/ET/images/doc.jpg" width = "500px" height = "500px" class="docExcel" /> '),"xls"==k&&(m=' <img src="/ET/images/excel.jpg" width = "500px" height = "500px" class="docExcel"/> '),"xlsx"==k&&(m=' <img src="/ET/images/excel.jpg" width = "500px" height = "500px" class="docExcel"/> '),"jpg"!=k&&"jpeg"!=k&&"png"!=k&&"gif"!=k&&"JPG"!=k&&"JPEG"!=k&&"PNG"!=k&&"GIF"!=k||(gapStyle="",l="show",m=' <img src="'+b.filePath.replace(/\\/g,"/")+'" />');var n='<span><i class="fa fa-eye" aria-hidden="true"></i></span><p>View</p>';"download"==l&&(n='<span><i class="fa fa-download" aria-hidden="true"></i></span><p>Download</p>');var o='<i class="fa fa-globe" aria-hidden="true" style="color: #115884 !important"></i>';3==b.shareType&&(o='<i class="fa fa-user" aria-hidden="true" style="color: #115884 !important"></i>');var p="";if(null!=b.shareDate){var q=new Date(b.shareDate);p=q.getMonth()+1+"/"+q.getDate()+"/"+q.getFullYear()}$("#notificationImageArea").html(m),$("#notificationDetailAreaSharedBy").html("<b>Share by :</b> "+c),$("#notificationDetailAreaFileName").html("<b>File Name :</b> "+b.fileName),$("#notificationDetailAreaSharedOn").html("<b>Share Date :</b> "+p),$("#notificationDetailAreaUserPix").html('<img src="'+d+'" alt="'+b.fileDesc+'" />'),$("#notificationDetailAreaDescription").html("<b>File Description :</b> "+b.fileDesc),$("#notificationDetailAreaShareType").html(o)}),$("#myModalNotificationButton").click()},error:function(){}})}$(function(){var a=$("meta[name='_csrf_token_header_page']").attr("content"),b=$("meta[name='_csrf_headername_header_page']").attr("content");$(document).ajaxSend(function(c,d,e){d.setRequestHeader(b,a)})}),$(document).ready(function(){fetchAndDecorateNotificationDetails()});